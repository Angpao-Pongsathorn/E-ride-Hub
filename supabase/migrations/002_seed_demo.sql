-- ============================================================
-- E-RideHub Demo Seed Data — คำเขื่อนแก้ว, ยโสธร
-- วิธีใช้: วาง SQL นี้ใน Supabase Dashboard > SQL Editor แล้วกด Run
-- ============================================================

-- Add missing columns if not exist
ALTER TABLE merchants ADD COLUMN IF NOT EXISTS delivery_time INTEGER DEFAULT 20;
ALTER TABLE merchants ADD COLUMN IF NOT EXISTS min_order INTEGER DEFAULT 0;

-- ============================================================
-- MERCHANTS
-- ============================================================
INSERT INTO merchants (
  id, name, description, category, phone,
  address_text, latitude, longitude,
  is_open, is_approved, rating,
  delivery_time, min_order,
  opening_time, closing_time
) VALUES

-- 1. ร้านส้มตำแม่มาลี
(
  '00000000-0000-0000-0000-000000000001',
  'ร้านส้มตำแม่มาลี',
  'ส้มตำ ลาบ ก้อย อาหารอีสานรสเด็ด ทำสดทุกจาน วัตถุดิบสดใหม่ทุกวัน',
  'อาหาร', '0891110001',
  'ตลาดสดคำเขื่อนแก้ว อ.คำเขื่อนแก้ว จ.ยโสธร 35110',
  15.6625, 104.1415,
  true, true, 4.8,
  20, 50,
  '08:00', '20:00'
),

-- 2. ข้าวมันไก่เจ้าป้อม
(
  '00000000-0000-0000-0000-000000000002',
  'ข้าวมันไก่เจ้าป้อม',
  'ข้าวมันไก่ต้มซีอิ๊ว ข้าวหน้าเป็ด น้ำซุปเข้มข้น ขายดีที่สุดในอำเภอ',
  'อาหาร', '0891110002',
  'หน้าตลาดเช้า อ.คำเขื่อนแก้ว จ.ยโสธร 35110',
  15.6618, 104.1405,
  true, true, 4.7,
  15, 40,
  '06:00', '14:00'
),

-- 3. เครื่องดื่มสดชื่น
(
  '00000000-0000-0000-0000-000000000003',
  'เครื่องดื่มสดชื่น',
  'ชานมไข่มุก ชาไทย กาแฟสด น้ำผลไม้ปั่น ราคาถูก รสชาติดี',
  'เครื่องดื่ม', '0891110003',
  'ถนนแจ้งสนิท อ.คำเขื่อนแก้ว จ.ยโสธร 35110',
  15.6612, 104.1398,
  true, true, 4.6,
  10, 30,
  '08:00', '21:00'
),

-- 4. ก๋วยเตี๋ยวเรือลุงแดง
(
  '00000000-0000-0000-0000-000000000004',
  'ก๋วยเตี๋ยวเรือลุงแดง',
  'ก๋วยเตี๋ยวเรือต้มนาน น้ำซุปใส เย็นตาโฟ ก๋วยจั๊บ รสชาติแบบดั้งเดิม',
  'อาหาร', '0891110004',
  'ริมถนนหน้าวัด อ.คำเขื่อนแก้ว จ.ยโสธร 35110',
  15.6630, 104.1422,
  true, true, 4.5,
  25, 35,
  '07:00', '15:00'
),

-- 5. เบเกอรี่บ้านหวาน
(
  '00000000-0000-0000-0000-000000000005',
  'เบเกอรี่บ้านหวาน',
  'ขนมปัง เค้ก คุกกี้ อบสดใหม่ทุกวัน ไม่ใส่สารกันบูด',
  'ขนม', '0891110005',
  'ซอยตลาดใหม่ อ.คำเขื่อนแก้ว จ.ยโสธร 35110',
  15.6608, 104.1390,
  true, true, 4.9,
  15, 60,
  '07:00', '20:00'
),

-- 6. ร้านของสดไทรใหญ่ (ปิดอยู่ — ทดสอบ badge ปิด)
(
  '00000000-0000-0000-0000-000000000006',
  'ของสดไทรใหญ่',
  'ผัก ผลไม้ ไข่ เนื้อสด ส่งตรงจากฟาร์ม',
  'ของสด', '0891110006',
  'ตลาดสดเช้า อ.คำเขื่อนแก้ว จ.ยโสธร 35110',
  15.6635, 104.1430,
  false, true, 4.3,
  30, 100,
  '05:00', '10:00'
)

ON CONFLICT (id) DO NOTHING;

-- ============================================================
-- MENU CATEGORIES
-- ============================================================
INSERT INTO menu_categories (id, merchant_id, name, sort_order, is_active) VALUES

-- ร้านส้มตำแม่มาลี
('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0000-000000000001', 'ส้มตำ', 1, true),
('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0000-000000000001', 'ลาบ/ก้อย', 2, true),
('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0000-000000000001', 'อาหารจานเดียว', 3, true),

-- ข้าวมันไก่เจ้าป้อม
('00000000-0000-0000-0002-000000000001', '00000000-0000-0000-0000-000000000002', 'ข้าวมันไก่/เป็ด', 1, true),
('00000000-0000-0000-0002-000000000002', '00000000-0000-0000-0000-000000000002', 'ของทานเล่น', 2, true),

-- เครื่องดื่มสดชื่น
('00000000-0000-0000-0003-000000000001', '00000000-0000-0000-0000-000000000003', 'ชานมไข่มุก', 1, true),
('00000000-0000-0000-0003-000000000002', '00000000-0000-0000-0000-000000000003', 'ชาและกาแฟ', 2, true),
('00000000-0000-0000-0003-000000000003', '00000000-0000-0000-0000-000000000003', 'น้ำผลไม้ปั่น', 3, true),

-- ก๋วยเตี๋ยวลุงแดง
('00000000-0000-0000-0004-000000000001', '00000000-0000-0000-0000-000000000004', 'ก๋วยเตี๋ยวน้ำ', 1, true),
('00000000-0000-0000-0004-000000000002', '00000000-0000-0000-0000-000000000004', 'ก๋วยเตี๋ยวแห้ง', 2, true),

-- เบเกอรี่บ้านหวาน
('00000000-0000-0000-0005-000000000001', '00000000-0000-0000-0000-000000000005', 'ขนมปัง', 1, true),
('00000000-0000-0000-0005-000000000002', '00000000-0000-0000-0000-000000000005', 'เค้กและของหวาน', 2, true)

ON CONFLICT (id) DO NOTHING;

-- ============================================================
-- MENU ITEMS
-- ============================================================
INSERT INTO menu_items (
  id, merchant_id, category_id, name, description, price,
  is_available, preparation_time, sort_order
) VALUES

-- === ร้านส้มตำแม่มาลี ===
('00000000-0000-0001-0001-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000001',
 'ส้มตำไทย', 'ส้มตำไทยรสจัดจ้าน มะละกอสด กุ้งแห้ง ถั่วลิสง', 40, true, 10, 1),

('00000000-0000-0001-0001-000000000002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000001',
 'ส้มตำปู', 'ส้มตำปูดองรสเค็ม ปูดองสด ใส่เส้น', 50, true, 10, 2),

('00000000-0000-0001-0001-000000000003', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000001',
 'ส้มตำซั่ว', 'ส้มตำซั่วใส่ปลาร้า รสเผ็ดจัดจ้านแบบอีสาน', 45, true, 10, 3),

('00000000-0000-0001-0002-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000002',
 'ลาบหมู', 'ลาบหมูสด ข้าวคั่ว สมุนไพรครบ', 60, true, 15, 1),

('00000000-0000-0001-0002-000000000002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000002',
 'ลาบเป็ด', 'ลาบเป็ดรสเด็ด เนื้อเป็ดนุ่ม', 70, true, 15, 2),

('00000000-0000-0001-0002-000000000003', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000002',
 'ก้อยกุ้งสด', 'ก้อยกุ้งสดรสเปรี้ยวเผ็ด กุ้งสดวันนี้', 80, true, 10, 3),

('00000000-0000-0001-0003-000000000001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000003',
 'ปลาย่างเกลือ', 'ปลานิลย่างเกลือ หอมกรอบ', 70, true, 20, 1),

('00000000-0000-0001-0003-000000000002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0001-000000000003',
 'ข้าวเหนียว', 'ข้าวเหนียวนึ่งร้อนๆ 1 ห่อ', 10, true, 5, 2),

-- === ข้าวมันไก่เจ้าป้อม ===
('00000000-0000-0002-0001-000000000001', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0002-000000000001',
 'ข้าวมันไก่ต้ม', 'ข้าวมันไก่ต้มซีอิ๊ว น้ำซุปใส เนื้อนุ่ม', 50, true, 5, 1),

('00000000-0000-0002-0001-000000000002', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0002-000000000001',
 'ข้าวมันไก่ทอด', 'ข้าวมันไก่ทอดกรอบ ซอสพริกแดง', 55, true, 5, 2),

('00000000-0000-0002-0001-000000000003', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0002-000000000001',
 'ข้าวหน้าเป็ด', 'ข้าวหน้าเป็ดพะโล้ เนื้อนุ่มหอมเครื่องเทศ', 60, true, 5, 3),

('00000000-0000-0002-0001-000000000004', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0002-000000000001',
 'ข้าวมันไก่ราดซอส 2 อย่าง', 'ต้ม+ทอด ซอสพิเศษ 2 ชนิด', 65, true, 5, 4),

('00000000-0000-0002-0002-000000000001', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0002-000000000002',
 'ต้มเลือดหมู', 'ต้มเลือดหมูรสจัด เครื่องเทศครบ', 40, true, 10, 1),

('00000000-0000-0002-0002-000000000002', '00000000-0000-0000-0000-000000000002', '00000000-0000-0000-0002-000000000002',
 'น้ำซุปไก่', 'น้ำซุปไก่ใสร้อนๆ 1 ถ้วย', 20, true, 3, 2),

-- === เครื่องดื่มสดชื่น ===
('00000000-0000-0003-0001-000000000001', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000001',
 'ชานมไข่มุกดำ', 'ชานมไข่มุกดำ หวานน้อย/กลาง/มาก', 45, true, 5, 1),

('00000000-0000-0003-0001-000000000002', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000001',
 'ชานมไข่มุกสีชมพู', 'ชานมผสมน้ำกุหลาบ ไข่มุกสีชมพู', 50, true, 5, 2),

('00000000-0000-0003-0001-000000000003', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000001',
 'มัทฉะไข่มุก', 'ชาเขียวมัทฉะญี่ปุ่น ไข่มุกหนึบ', 55, true, 5, 3),

('00000000-0000-0003-0002-000000000001', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000002',
 'ชาไทยเย็น', 'ชาไทยเย็นหวานมัน นมข้น', 35, true, 3, 1),

('00000000-0000-0003-0002-000000000002', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000002',
 'กาแฟเย็น', 'กาแฟโบราณเย็น นมสดเข้มข้น', 40, true, 3, 2),

('00000000-0000-0003-0002-000000000003', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000002',
 'โอเลี้ยง', 'โอเลี้ยงแบบโบราณ หอมกลิ่นใบเตย', 30, true, 3, 3),

('00000000-0000-0003-0003-000000000001', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000003',
 'สมูทตี้มะม่วง', 'มะม่วงน้ำดอกไม้ปั่นสด ไม่ผสมน้ำตาล', 55, true, 5, 1),

('00000000-0000-0003-0003-000000000002', '00000000-0000-0000-0000-000000000003', '00000000-0000-0000-0003-000000000003',
 'น้ำแตงโมปั่น', 'แตงโมสดปั่น ไม่ใส่น้ำเชื่อม', 45, true, 5, 2),

-- === ก๋วยเตี๋ยวลุงแดง ===
('00000000-0000-0004-0001-000000000001', '00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0004-000000000001',
 'ก๋วยเตี๋ยวเรือน้ำใส', 'ก๋วยเตี๋ยวเรือน้ำใส เส้นเล็ก หมูและเนื้อ', 50, true, 10, 1),

('00000000-0000-0004-0001-000000000002', '00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0004-000000000001',
 'เย็นตาโฟ', 'เย็นตาโฟน้ำชมพู ลูกชิ้น เต้าหู้ หมึก', 55, true, 10, 2),

('00000000-0000-0004-0001-000000000003', '00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0004-000000000001',
 'ก๋วยจั๊บน้ำใส', 'ก๋วยจั๊บน้ำใสสไตล์อีสาน เส้นหยัก', 50, true, 10, 3),

('00000000-0000-0004-0002-000000000001', '00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0004-000000000002',
 'ก๋วยเตี๋ยวแห้งหมู', 'ก๋วยเตี๋ยวแห้งราดซอสเข้มข้น หมูแดด', 50, true, 10, 1),

('00000000-0000-0004-0002-000000000002', '00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0004-000000000002',
 'ก๋วยจั๊บแห้ง', 'ก๋วยจั๊บแห้งน้ำมันหอย หมูกรอบ', 55, true, 10, 2),

-- === เบเกอรี่บ้านหวาน ===
('00000000-0000-0005-0001-000000000001', '00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0005-000000000001',
 'ขนมปังสังขยาใบเตย', 'ขนมปังนุ่มสอดไส้สังขยาใบเตย อบสด', 25, true, 5, 1),

('00000000-0000-0005-0001-000000000002', '00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0005-000000000001',
 'ขนมปังกรอบกระเทียม', 'ขนมปังกรอบทาเนยกระเทียม หอมอบ', 20, true, 5, 2),

('00000000-0000-0005-0001-000000000003', '00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0005-000000000001',
 'ครัวซองต์เนย', 'ครัวซองต์เนยสดอบร้อน กรอบนอกนุ่มใน', 35, true, 5, 3),

('00000000-0000-0005-0002-000000000001', '00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0005-000000000002',
 'เค้กช็อกโกแลตชิ้น', 'เค้กช็อกโกแลตเข้มข้น ไส้กานาซ 1 ชิ้น', 55, true, 5, 1),

('00000000-0000-0005-0002-000000000002', '00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0005-000000000002',
 'คุกกี้เนยสด (3 ชิ้น)', 'คุกกี้เนยสดอบใหม่ หอมละมุน', 45, true, 5, 2),

('00000000-0000-0005-0002-000000000003', '00000000-0000-0000-0000-000000000005', '00000000-0000-0000-0005-000000000002',
 'บราวนี่ชิ้น', 'บราวนี่ช็อกโกแลตเข้มข้น วอลนัท', 50, true, 5, 3)

ON CONFLICT (id) DO NOTHING;

-- ============================================================
-- RIDERS (Demo)
-- ============================================================
INSERT INTO riders (
  id, full_name, phone, vehicle_type, vehicle_plate, vehicle_brand,
  is_online, is_approved, rating, total_deliveries,
  current_latitude, current_longitude
) VALUES
(
  '00000000-0000-0000-0010-000000000001',
  'มานพ รักดี',
  '0891230001',
  'motorcycle', 'กข 1234 ยโสธร', 'Honda Wave',
  true, true, 4.9, 142,
  15.6620, 104.1410
),
(
  '00000000-0000-0000-0010-000000000002',
  'สมหญิง ใจงาม',
  '0891230002',
  'motorcycle', 'คค 5678 ยโสธร', 'Yamaha Fino',
  true, true, 4.8, 98,
  15.6615, 104.1400
),
(
  '00000000-0000-0000-0010-000000000003',
  'วิชัย ขยันทำ',
  '0891230003',
  'motorcycle', 'งง 9012 ยโสธร', 'Honda Click',
  false, true, 4.7, 55,
  15.6608, 104.1395
)
ON CONFLICT (id) DO NOTHING;

-- ============================================================
-- PROMOTIONS
-- ============================================================
INSERT INTO promotions (
  id, code, description, discount_type, discount_value,
  min_order_amount, max_discount,
  usage_limit, used_count,
  start_date, end_date, is_active
) VALUES
(
  '00000000-0000-0000-0020-000000000001',
  'WELCOME',
  'ยินดีต้อนรับ! ลด ฿20 สำหรับออเดอร์แรก ขั้นต่ำ ฿80',
  'fixed', 20.00, 80.00, 20.00,
  500, 0,
  NOW(), NOW() + INTERVAL '30 days', true
),
(
  '00000000-0000-0000-0020-000000000002',
  'ERIDE10',
  'ลด 10% สูงสุด ฿30 ทุกออเดอร์ ขั้นต่ำ ฿100',
  'percent', 10.00, 100.00, 30.00,
  200, 0,
  NOW(), NOW() + INTERVAL '14 days', true
),
(
  '00000000-0000-0000-0020-000000000003',
  'FREESHIP',
  'ส่งฟรี! ลดค่าส่ง ฿20 ขั้นต่ำออเดอร์ ฿120',
  'fixed', 20.00, 120.00, 20.00,
  100, 0,
  NOW(), NOW() + INTERVAL '7 days', true
)
ON CONFLICT (id) DO NOTHING;

-- ============================================================
-- VERIFY (Optional — เช็คผลลัพธ์)
-- ============================================================
-- SELECT name, category, is_open, is_approved, rating FROM merchants ORDER BY name;
-- SELECT m.name as shop, mi.name as menu, mi.price FROM menu_items mi JOIN merchants m ON m.id = mi.merchant_id ORDER BY m.name, mi.sort_order;
-- SELECT full_name, vehicle_type, is_online, is_approved FROM riders;
-- SELECT code, description, is_active FROM promotions;
